service: timy
frameworkVersion: '3'
useDotenv: true
plugins:
  - serverless-dotenv-plugin

provider:
  name: aws
  runtime: nodejs16.x
  region: eu-west-3
  httpApi:
    cors: true
  environment:
    AUTH0_CLIENT_ID: ${env:AUTH0_CLIENT_ID}
    AUTH0_CLIENT_SECRET: ${env:AUTH0_CLIENT_SECRET}
    AUTH0_PUBLIC_KEY: ${env:AUTH0_PUBLIC_KEY}
    PGHOST: ${env:PGHOST}
    PGUSER: ${env:PGUSER}
    PGDATABASE: ${env:PGDATABASE}
    PGPASSWORD: ${env:PGPASSWORD}
    FRONT_HOSTNAME: ${env:FRONT_HOSTNAME}
    PGPORT: ${env:PGPORT}
  tags:
    name: Collectio

functions:
  main:
    handler: build/src/lambda.main
    events:
      - httpApi:
          path: /{proxy+}
          method: ANY
